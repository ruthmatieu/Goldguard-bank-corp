{"ast":null,"code":"import _defineProperty from\"/Users/ruthmathieu/Desktop/Lambda School/BW-Unit-3/front-end/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/ruthmathieu/Desktop/Lambda School/BW-Unit-3/front-end/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ruthmathieu/Desktop/Lambda School/BW-Unit-3/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import*as yup from\"yup\";import{TextField}from'@material-ui/core';var schema=yup.object().shape({username:yup.string().required('Username is a required field.'),password:yup.string().required('Password is a required field.')});var Login=function Login(){var _useState=useState({username:'',password:''}),_useState2=_slicedToArray(_useState,2),errorState=_useState2[0],setErrorState=_useState2[1];var validator=function validator(e){yup.reach(schema,e.target.name).validate(e.target.value).then(function(valid){setErrorState(_objectSpread(_objectSpread({},errorState),{},_defineProperty({},e.target.name,'')));}).catch(function(err){setErrorState(_objectSpread(_objectSpread({},errorState),{},_defineProperty({},e.target.name,err.errors[0])));});};var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState({username:'',password:''}),_useState6=_slicedToArray(_useState5,2),userCredentials=_useState6[0],setuserCredentials=_useState6[1];var changeHandler=function changeHandler(e){e.persist();validator(e);setuserCredentials(_objectSpread(_objectSpread({},userCredentials),{},_defineProperty({},e.target.name,e.target.value)));// console.log(e)\n};var submitHandler=function submitHandler(e){//prevents automatic refresh\ne.preventDefault();//resets form after submitted\nsetuserCredentials({username:'',password:''});axios.post(\"https://reqres.in/api/users\",userCredentials).then(function(res){return setData(res);}).catch(function(err){console.log(err.res);});console.log('Login successful');//make a POST request and send the userCredentials obj to the API\naxios.post(\"insert the server endpoint here\",userCredentials).then(function(res){console.log(res);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(TextField,{type:\"text\",id:\"standard-basic\",label:\"Username\",name:\"username\",fullWidth:true,value:userCredentials.username,onChange:changeHandler,helperText:errorState.username.length>0?/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errorState.username}):null})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(TextField,{type:\"password\",id:\"standard-basic\",label:\"Password\",name:\"password\",fullWidth:true,value:userCredentials.password,onChange:changeHandler,helperText:errorState.password.length>0?/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errorState.password}):null})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(data,null,2)})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Not a registered user? Click \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"here\"}),\" to register\"]})]});};export default Login;","map":{"version":3,"sources":["/Users/ruthmathieu/Desktop/Lambda School/BW-Unit-3/front-end/src/components/Login.js"],"names":["React","useState","useEffect","axios","Link","yup","TextField","schema","object","shape","username","string","required","password","Login","errorState","setErrorState","validator","e","reach","target","name","validate","value","then","valid","catch","err","errors","data","setData","userCredentials","setuserCredentials","changeHandler","persist","submitHandler","preventDefault","post","res","console","log","length","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport * as yup from \"yup\";\nimport { TextField } from '@material-ui/core';\n\nconst schema = yup.object().shape({\n    username: yup.string().required('Username is a required field.'),\n    password: yup.string().required('Password is a required field.')\n})\n\nconst Login = () => {\n\n    const [errorState, setErrorState] = useState({\n        username: '',\n        password: ''\n    })\n\n    const validator = (e) => {\n        yup\n          .reach(schema, e.target.name)\n          .validate(e.target.value)\n          .then((valid) => {\n            setErrorState({\n              ...errorState,\n              [e.target.name]: '',\n            });\n          })\n          .catch((err) => {\n            setErrorState({\n              ...errorState,\n              [e.target.name]: err.errors[0],\n            });\n          });\n      };\n    \n    const [data, setData] = useState([]);  \n\n    const [userCredentials, setuserCredentials] = useState({\n        username: '',\n        password: ''\n    })\n\n    const changeHandler = e => {\n        e.persist();\n        validator(e);\n        setuserCredentials({ ...userCredentials, [e.target.name]: e.target.value });\n        // console.log(e)\n        \n    }\n\n    const submitHandler = e => {\n        //prevents automatic refresh\n        e.preventDefault();\n        //resets form after submitted\n        setuserCredentials({\n            username: '',\n            password: ''\n        })\n        \n\n        axios\n            .post(`https://reqres.in/api/users`, userCredentials)\n            .then(res => setData(res))\n            .catch(err => {console.log(err.res)})\n        console.log('Login successful')    \n\n        //make a POST request and send the userCredentials obj to the API\n        axios.\n            post(`insert the server endpoint here`, userCredentials)\n            .then(res => {console.log(res)})\n            .catch(err => {console.log(err)})\n    }\n    \n    return (\n        <div className=\"container\">\n            <form onSubmit={submitHandler}>\n                <div>\n                    {/* <label htmlFor='username'>Username</label> */}\n                    <TextField\n                        type=\"text\"\n                        id=\"standard-basic\"\n                        label=\"Username\"\n                        name=\"username\"\n                        fullWidth\n                        value={userCredentials.username}\n                        onChange={changeHandler}\n                        helperText={errorState.username.length > 0 ? (<p className=\"error\">{errorState.username}</p>) : null}\n                    />\n                </div>\n                <div>\n                    {/* <label htmlFor='password'>Password</label> */}\n                    <TextField\n                        type=\"password\"\n                        id=\"standard-basic\"\n                        label=\"Password\"\n                        name=\"password\"\n                        fullWidth\n                        value={userCredentials.password}\n                        onChange={changeHandler}\n                        helperText={errorState.password.length > 0 ? (<p className=\"error\">{errorState.password}</p>) : null}\n                    />\n                </div>\n                \n                <button type='submit'>Login</button>\n                <pre>{JSON.stringify(data, null, 2)}</pre>\n            </form>\n            <p>Not a registered user? Click <Link to='/register'>here</Link> to register</p>\n        </div>\n    )\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}